/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

.jp-FileBrowser .jp-SidePanel-content {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  border-bottom: none;
  height: auto;
  margin: 12px 12px 8px 12px; /* qBraid: consistent margins */
  box-shadow: none;
  padding: 0;
  background: #1a1a1a !important; /* qBraid: dark grey sidebar background */
  display: flex;
  gap: 4px; /* qBraid: spacing between buttons */
}

.jp-FileBrowser-toolbar.jp-Toolbar::part(positioning-region) {
  row-gap: 12px;
}

.jp-FileBrowser-filterToolbar {
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
}

.jp-FileBrowser-filterToolbar.jp-Toolbar {
  border-bottom: none;
  height: auto;
  margin: 0 12px 6px;
  box-shadow: none;
  padding: 0;
}

.jp-FileBrowser-Panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 0 12px 8px 12px; /* qBraid: consistent margins */
  color: var(--qbraid-text-muted); /* #a3a3a3 - Muted text */
  font-size: 12px;
  padding: 8px 0; /* qBraid: vertical padding */
}

.jp-BreadCrumbs-item {
  margin: 0 2px;
  padding: 0 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar > .jp-Toolbar-item,
.jp-FileBrowser-filterToolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0;
  align-items: center;
  height: unset;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item .jp-ToolbarButtonComponent {
  width: 28px; /* qBraid: standard button size */
  height: 28px; /* qBraid: standard button size */
  border-radius: 6px; /* qBraid: rounded corners */
  transition: background var(--qbraid-transition-fast), color var(--qbraid-transition-fast);
}

/* qBraid: Purple + button (first button - New File) - less prominent */
.jp-FileBrowser-toolbar > .jp-Toolbar-item:first-child .jp-ToolbarButtonComponent {
  background: transparent !important; /* qBraid: transparent background */
  color: var(--qbraid-purple-400) !important; /* #c084fc - Lighter purple, less prominent */
  border: 1px solid var(--qbraid-purple-500) !important; /* #a855f7 - Purple border */
  border-radius: 6px !important;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item:first-child .jp-ToolbarButtonComponent:hover {
  background: rgba(168, 85, 247, 0.1) !important; /* qBraid: subtle purple hover */
  color: var(--qbraid-purple-400) !important;
  border-color: var(--qbraid-purple-400) !important;
}

/* qBraid: Other toolbar buttons */
.jp-FileBrowser-toolbar > .jp-Toolbar-item:not(:first-child) .jp-ToolbarButtonComponent {
  background: transparent !important;
  color: var(--qbraid-text-muted) !important; /* #a3a3a3 - Muted text */
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item:not(:first-child) .jp-ToolbarButtonComponent:hover {
  background: #262626 !important; /* qBraid: slightly lighter grey on hover */
  color: var(--qbraid-text-primary) !important; /* #ededed - Primary text */
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-FileBrowser .lm-AccordionPanel > h3:first-child {
  display: none;
}

.jp-FileBrowser-filterToolbar > .jp-FileBrowser-filterBox {
  width: 100%;
  margin: 0 12px 12px 12px; /* qBraid: consistent margins */
}

.jp-FileBrowser-filterBox > .jp-FilterBox {
  width: 100%;
}

/* qBraid: File browser search box styling */
.jp-FileBrowser-filterBox .jp-FilterBox input {
  background: #262626 !important; /* qBraid: dark grey input background */
  border: 1px solid #333333 !important; /* qBraid: subtle border */
  border-radius: 6px !important;
  color: #ededed !important; /* qBraid: white text */
  padding: 8px 12px !important;
  font-size: 13px !important;
  width: 100% !important;
}

.jp-FileBrowser-filterBox .jp-FilterBox input::placeholder {
  color: #737373 !important; /* qBraid: muted placeholder */
}

.jp-FileBrowser-filterBox .jp-FilterBox input:focus {
  border-color: #3b82f6 !important; /* qBraid: blue focus */
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2) !important;
}

.jp-Open-Dialog > .jp-FileBrowser {
  min-height: 200px;
}

.jp-Open-Dialog-label {
  overflow: visible;
}

/*-----------------------------------------------------------------------------
| DirListing - qBraid VS Code Style
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
  overflow: hidden;
  padding: 0 0 8px 0; /* qBraid: bottom padding */
  background: #1a1a1a !important; /* qBraid: dark grey sidebar background */

  --jp-dirlisting-padding-width: 12px;
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  border-top: none;
  border-bottom: 1px solid var(--qbraid-border-subtle); /* #1f1f1f - Subtle border */
  box-shadow: none;
  z-index: 2;
  background: #1a1a1a !important; /* qBraid: dark grey sidebar background */
  user-select: none;
  padding: 8px 12px; /* qBraid: more padding */
  font-size: 10px; /* qBraid: slightly smaller */
  text-transform: uppercase;
  letter-spacing: 0.5px; /* qBraid: less letter spacing */
  font-weight: 600;
  color: var(--qbraid-text-disabled); /* #737373 - Disabled text */
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  display: flex;
}

.jp-DirListing-headerItemText {
  flex-grow: 1;
  text-overflow: ellipsis;
  overflow: hidden;
}

.jp-DirListing-headerItem:hover {
  background: var(--qbraid-bg-hover); /* #1a1a1a - Hover state */
}

.jp-DirListing-headerItem.jp-id-name:not([style*='width']) {
  /* default width before user resizes this column */
  flex: 1 1 126px;
}

.jp-DirListing-headerItem.jp-id-modified:not([style*='width']) {
  /* default width before user resizes this column - expand to fill space left by hidden size column */
  flex: 1 1 auto !important; /* qBraid: expand to fill available space */
}

.jp-DirListing-headerItem.jp-id-filesize:not([style*='width']) {
  /* default width before user resizes this column */
  flex: 0 0 75px;
}

/* qBraid: Hide file size column */
.jp-DirListing-headerItem.jp-id-filesize {
  display: none !important;
  width: 0 !important; /* qBraid: ensure no width is allocated */
}

/* qBraid: Force modified column to expand - override inline styles from JavaScript */
.jp-DirListing-headerItem.jp-id-modified {
  flex: 1 1 auto !important;
  min-width: 0 !important;
}

/* qBraid: Override any inline width styles JavaScript sets */
.jp-DirListing-headerItem.jp-id-modified[style] {
  width: auto !important;
  flex: 1 1 auto !important;
}

.jp-DirListing-headerItem.jp-id-modified,
.jp-DirListing-headerItem.jp-id-filesize {
  text-align: right;
  /* stylelint-disable */
  container-type: inline-size;
  /* stylelint-enable */
}

/**
 * Use container queries (not yet supported by our version of stylelint)
 * to display either a small or large header for the last-modified column.
 */
/* stylelint-disable */
@container (max-width: 300px) {
  /* stylelint-enable */
  .jp-DirListing-headerItem.jp-id-modified
    > .jp-DirListing-headerItemText-small,
  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-small {
    display: inline;
  }

  .jp-DirListing-headerItem.jp-id-modified
    > .jp-DirListing-headerItemText-large,
  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-large {
    display: none;
  }
}

/* stylelint-disable */
@container (min-width: 300px) {
  /* stylelint-enable */
  .jp-DirListing-headerItem.jp-id-modified
    > .jp-DirListing-headerItemText-small {
    display: none;
  }

  .jp-DirListing-headerItem.jp-id-modified
    > .jp-DirListing-headerItemText-large {
    display: inline;
  }
}

/* stylelint-disable */
@container (max-width: 100px) {
  /* stylelint-enable */
  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-small {
    display: inline;
  }

  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-large {
    display: none;
  }
}

/* stylelint-disable */
@container (min-width: 100px) {
  /* stylelint-enable */
  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-small {
    display: none;
  }

  .jp-DirListing-headerItem.jp-id-filesize
    > .jp-DirListing-headerItemText-large {
    display: inline;
  }
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 4px 0;
  list-style-type: none;
  overflow: auto;
  background-color: #1a1a1a !important; /* qBraid: dark grey sidebar background */
  overflow-x: hidden;
  scrollbar-width: thin !important; /* qBraid: thin scrollbar */
}

/* qBraid: Force file browser scrollbar to be 3px - multiple selectors for maximum coverage */
.jp-DirListing-content::-webkit-scrollbar,
.jp-DirListing-content::-webkit-scrollbar-corner,
.jp-DirListing ul::-webkit-scrollbar,
.jp-DirListing ul::-webkit-scrollbar-corner,
.jp-FileBrowser .jp-DirListing-content::-webkit-scrollbar,
.jp-FileBrowser .jp-DirListing-content::-webkit-scrollbar-corner,
.jp-SidePanel .jp-DirListing-content::-webkit-scrollbar,
.jp-SidePanel .jp-DirListing-content::-webkit-scrollbar-corner {
  width: 3px !important;
  height: 3px !important;
  background: var(--jp-scrollbar-background-color) !important;
}

.jp-DirListing-content::-webkit-scrollbar-thumb,
.jp-DirListing ul::-webkit-scrollbar-thumb,
.jp-FileBrowser .jp-DirListing-content::-webkit-scrollbar-thumb,
.jp-SidePanel .jp-DirListing-content::-webkit-scrollbar-thumb {
  border: 0px solid transparent !important;
  background-clip: content-box;
  background: rgb(var(--jp-scrollbar-thumb-color)) !important;
  border-radius: var(--jp-scrollbar-thumb-radius) !important;
}

.jp-DirListing-content::-webkit-scrollbar-thumb:hover,
.jp-DirListing ul::-webkit-scrollbar-thumb:hover,
.jp-FileBrowser .jp-DirListing-content::-webkit-scrollbar-thumb:hover,
.jp-SidePanel .jp-DirListing-content::-webkit-scrollbar-thumb:hover {
  background: rgb(64, 64, 64) !important;
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  align-items: center;
  padding: 4px 12px; /* qBraid: slightly more padding */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  display: inline-grid;
  grid-auto-columns: max-content;
  width: 100%;
  box-sizing: border-box;
  grid-auto-flow: column;
  /* qBraid: Ensure modified column expands when filesize is hidden - override inline styles */
  grid-template-columns: auto auto 1fr !important;
  border-radius: 0; /* qBraid: no rounded corners like VS Code */
  margin: 0;
  transition: background var(--qbraid-transition-fast); /* qBraid: use token */
  font-size: 13px;
  line-height: 24px; /* qBraid: slightly taller line height */
  position: relative;
  color: var(--qbraid-text-secondary); /* #d4d4d4 - Secondary text */
}

.jp-DirListing-checkboxWrapper {
  /* Increases hit area of checkbox. */
  padding: 4px;
}

.jp-DirListing-content .jp-DirListing-checkboxWrapper {
  position: relative;
  left: -4px;
  margin: -4px 0 -4px -8px;
}

.jp-DirListing-checkboxWrapper.jp-mod-visible {
  visibility: visible;
}

/* For devices that support hovering, hide checkboxes until hovered, selected...
*/
@media (hover: hover) {
  .jp-DirListing-checkboxWrapper {
    visibility: hidden;
  }

  .jp-DirListing-item:hover .jp-DirListing-checkboxWrapper,
  .jp-DirListing-item.jp-mod-selected .jp-DirListing-checkboxWrapper {
    visibility: visible;
  }
}

.jp-DirListing-resizeHandle {
  min-width: var(--jp-border-width);
  background: var(--jp-border-color2);
  height: calc(100% - 4px);

  /* border increases the area where handle can be grabbed */
  border: 2px solid var(--jp-layout-color1);
}

.jp-DirListing-resizeHandle.jp-mod-active {
  background: var(--jp-brand-color1);
  border-color: var(--jp-brand-color1);
}

.jp-DirListing-resizeHandle.jp-mod-active:hover {
  border-color: var(--jp-brand-color1);
}

.jp-DirListing-resizeHandle:hover {
  cursor: col-resize;
  border-color: var(--jp-border-color2);
}

.jp-DirListing-itemName {
  display: flex;
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

/* qBraid: Selection with left accent bar */
.jp-DirListing-item.jp-mod-selected {
  color: var(--qbraid-text-primary) !important; /* #ededed - Primary text */
  background: #262626 !important; /* qBraid: slightly lighter grey for selected */
  position: relative;
}

/* qBraid: Left accent bar for selected file browser item (off-white) */
.jp-DirListing-item.jp-mod-selected::before {
  content: '';
  position: absolute;
  left: 0;
  top: 4px;
  bottom: 4px;
  width: 1px; /* Thin accent bar */
  background: rgba(255, 255, 255, 0.4) !important; /* Off-white accent */
  border-radius: 0 2px 2px 0;
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: rgba(16, 185, 129, 0.2) !important; /* Teal drop target */
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: #262626 !important; /* qBraid: slightly lighter grey on hover */
  transition: background var(--qbraid-transition-fast);
}

/* qBraid: Running indicator styles are in the later selector */

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 8px; /* qBraid: more spacing between icon and text */
  opacity: 0.8; /* qBraid: slightly muted icons */
}

/* qBraid: Icon color adjustments */
.jp-DirListing-itemIcon svg {
  fill: var(--qbraid-text-secondary); /* #d4d4d4 - Secondary text */
}

.jp-DirListing-item.jp-mod-selected .jp-DirListing-itemIcon svg {
  fill: var(--qbraid-text-primary); /* #ededed - Primary text for selected */
}

.jp-DirListing-itemText,
.jp-DirListing-itemModified,
.jp-DirListing-itemFileSize {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* qBraid: Hide file size column content */
.jp-DirListing-itemFileSize {
  display: none !important;
  width: 0 !important; /* qBraid: ensure no width is allocated */
}

/* qBraid: Force modified column item to expand - override inline styles from JavaScript */
.jp-DirListing-itemModified {
  flex: 1 1 auto !important;
  min-width: 0 !important;
}

/* qBraid: Override any inline width styles JavaScript sets */
.jp-DirListing-itemModified[style] {
  width: auto !important;
  flex: 1 1 auto !important;
  max-width: none !important;
}

.jp-DirListing-itemName:not([style*='width']) > .jp-DirListing-itemText {
  flex: 1 1 106px;
}

.jp-DirListing-item:has(.jp-DirListing-itemText:focus-visible) {
  /* Targeting `.jp-DirListing-itemText` specifically to avoid an extra outline
  when it gets replaced with `jp-DirListing-editor` when editing the file name */
  outline-width: 2px;
  outline-color: var(--jp-inverse-layout-color1);
  outline-style: solid;
  outline-offset: -4px;
}

.jp-DirListing-item.jp-mod-selected:focus-within {
  outline-color: var(--jp-layout-color1);
}

.jp-DirListing-item > .jp-DirListing-itemName > .jp-DirListing-itemText:focus {
  outline: 0;
}

.jp-DirListing-itemModified {
  text-align: right;
  color: var(--qbraid-text-disabled) !important; /* #737373 - Disabled text */
  font-size: 11px !important; /* qBraid: slightly smaller */
  flex: 1 1 auto !important; /* qBraid: expand to fill space left by hidden size column */
  min-width: 0 !important; /* Allow flex shrinking */
  /* qBraid: Override any inline width styles set by JavaScript */
  width: auto !important;
  max-width: none !important;
}

.jp-DirListing-itemFileSize {
  text-align: right;
  color: var(--qbraid-text-disabled) !important; /* #737373 - Disabled text */
  font-size: 11px !important; /* qBraid: slightly smaller */
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
  z-index: 0;
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: var(--qbraid-blue-500) !important; /* #3b82f6 - Blue (more subtle) */
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
  text-shadow: 0 0 8px rgba(16, 185, 129, 0.8);
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon::before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}
