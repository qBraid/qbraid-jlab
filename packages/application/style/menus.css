/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-menubar-height: 28px;
  --jp-private-menu-item-height: 24px;
}

/*-----------------------------------------------------------------------------
| MenuBar
|----------------------------------------------------------------------------*/

.lm-MenuBar,
#jp-MainMenu {
  background: transparent !important; /* qBraid: transparent - parent has black background */
  color: #ffffff !important; /* qBraid: white text */
  font-size: var(--jp-ui-font-size1);
  overflow: hidden;
  border-bottom: none; /* qBraid: no border */
  margin-left: 0 !important; /* qBraid: no left margin - flow directly after logo */
  margin-right: 0 !important; /* qBraid: no right margin */
  padding-left: 0 !important; /* qBraid: no left padding */
  padding-right: 0 !important; /* qBraid: no right padding */
  flex-shrink: 0 !important; /* qBraid: don't shrink */
  order: 1 !important; /* qBraid: ensure menu comes after logo */
}

/* qBraid: Target main menu specifically */
#jp-top-panel > #jp-MainMenu,
#jp-top-panel > .lm-MenuBar#jp-MainMenu {
  margin-left: 4px !important; /* qBraid: minimal gap after logo/text */
  padding-left: 0 !important;
}

.lm-MenuBar:hover {
  overflow-x: auto;
}

.lm-MenuBar-menu.jp-ThemedContainer {
  top: calc(-2 * var(--jp-border-width));
  scrollbar-width: none;
  -ms-overflow-style: none;
  overflow: auto;
  background:
    linear-gradient(var(--jp-layout-color0) 30%, rgba(0, 0, 0, 0)) center top,
    linear-gradient(rgba(0, 0, 0, 0), var(--jp-layout-color0) 70%) center bottom,
    radial-gradient(
        farthest-side at 50% 0,
        color-mix(
          in hsl,
          var(--jp-layout-color0) 50%,
          var(--jp-inverse-layout-color0) 30%
        ),
        rgba(0, 0, 0, 0)
      )
      center top,
    radial-gradient(
        farthest-side at 50% 100%,
        color-mix(
          in hsl,
          var(--jp-layout-color0) 50%,
          var(--jp-inverse-layout-color0) 30%
        ),
        rgba(0, 0, 0, 0)
      )
      center bottom;
  background-color: var(--jp-layout-color0);
  background-repeat: no-repeat;
  background-size:
    100% 40px,
    100% 40px,
    100% 14px,
    100% 14px;
  background-attachment: local, local, scroll, scroll;
}

.lm-MenuBar-menu.jp-ThemedContainer::-webkit-scrollbar {
  display: none;
}

.lm-MenuBar-item {
  padding: 0 4px !important; /* qBraid: very tight padding for cohesive feel */
  border: none; /* qBraid: no borders */
  border-radius: 0; /* qBraid: no rounded corners */
  margin: 0 !important; /* qBraid: no margin */
  line-height: calc(
    var(--jp-private-menubar-height) - var(--jp-border-width) * 2 - 4px
  );
  transition: background var(--qbraid-transition-fast), color var(--qbraid-transition-fast);
  color: #ffffff !important; /* qBraid: white text */
}

.lm-MenuBar-item:hover {
  background: rgba(255, 255, 255, 0.1) !important; /* qBraid: subtle white hover */
  color: #ffffff !important; /* qBraid: white text */
}

.lm-MenuBar-item:active,
.lm-MenuBar-item[aria-expanded='true'] {
  background: rgba(255, 255, 255, 0.15) !important; /* qBraid: slightly more visible active */
  color: #ffffff !important; /* qBraid: white text */
}

.lm-MenuBar-content:focus-visible {
  outline-offset: -3px; /* this value is a compromise between Firefox, Chrome,
    and Safari over this outline's visibility and discretion */
}

.lm-MenuBar:focus-visible {
  outline: 1px solid var(--jp-accept-color-active, var(--jp-brand-color1));
  outline-offset: -1px;
}

.lm-MenuBar-menu:focus-visible,
.lm-MenuBar-item:focus-visible,
.lm-Menu-item:focus-visible {
  outline: unset;
  outline-offset: unset;
  -moz-outline-radius: unset;
}

.lm-MenuBar-item.lm-mod-active {
  background: rgba(255, 255, 255, 0.1) !important; /* qBraid: subtle white active */
}

.lm-MenuBar.lm-mod-active .lm-MenuBar-item.lm-mod-active {
  z-index: 10001;
  background: rgba(255, 255, 255, 0.15) !important; /* qBraid: slightly more visible active */
  color: #ffffff !important; /* qBraid: white text */
  border: none !important; /* qBraid: no borders */
  box-shadow: none !important; /* qBraid: no shadow */
}

/* stylelint-disable-next-line selector-max-class */
.jp-LabShell[data-shell-mode='single-document']
  .lm-MenuBar.lm-mod-active
  .lm-MenuBar-item.lm-mod-active {
  border-top: var(--jp-border-width) solid var(--jp-border-color1);
}

.lm-MenuBar-item.lm-mod-disabled {
  color: var(--jp-ui-font-color3);
}

.lm-MenuBar-item.lm-type-separator {
  margin: 2px;
  padding: 0;
  border: none;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
}

.lm-MenuBar-itemMnemonic {
  text-decoration: underline;
}

/*-----------------------------------------------------------------------------
| Menu
|----------------------------------------------------------------------------*/

.lm-Menu {
  z-index: 10000;
  padding: 6px; /* qBraid: more padding */
  background: #1a1a1a !important; /* qBraid: dark grey surface */
  color: var(--qbraid-text-primary) !important; /* #ededed - Primary text */
  border: 1px solid var(--qbraid-border-default) !important; /* #262626 - Default border */
  border-radius: var(--qbraid-radius-md); /* 8px - Medium radius */
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important; /* qBraid: deeper shadow */
  font-size: var(--jp-ui-font-size1);
}

.lm-Menu-item {
  min-height: var(--jp-private-menu-item-height);
  max-height: var(--jp-private-menu-item-height);
  padding: 0 4px; /* qBraid: horizontal padding */
  line-height: var(--jp-private-menu-item-height);
  border-radius: var(--qbraid-radius-sm); /* 4px - Small radius */
  margin: 1px 0; /* qBraid: spacing */
  transition: background var(--qbraid-transition-fast), color var(--qbraid-transition-fast);
  color: var(--qbraid-text-primary); /* #ededed - Primary text */
}

.lm-Menu-item.lm-mod-active {
  background: #262626 !important; /* qBraid: slightly lighter grey on hover */
  color: var(--qbraid-text-primary) !important; /* #ededed - Primary text */
}

.lm-Menu-item.lm-mod-disabled {
  color: var(--jp-ui-font-color3);
}

.lm-Menu-itemIcon {
  width: 21px;
  padding: 0 2px 0 4px;
  margin-top: -2px;
}

.lm-Menu-itemLabel {
  padding: 0 32px 0 2px;
}

.lm-Menu-itemMnemonic {
  text-decoration: underline;
}

.lm-Menu-itemShortcut {
  padding: 0;
}

.lm-Menu-itemSubmenuIcon {
  width: 18px;
  padding: 0 4px 0 0;
}

.lm-Menu-item[data-type='separator'] > div {
  padding: 0;
  height: 9px;
}

.lm-Menu-item[data-type='separator'] > div::after {
  content: '';
  display: block;
  position: relative;
  top: 4px;
  border-top: var(--jp-border-width) solid var(--jp-layout-color2);
  mix-blend-mode: multiply;
}

/* gray out icon/caret for disabled menu items */
.lm-Menu-item.lm-mod-disabled > .lm-Menu-itemIcon,
.lm-Menu-item[data-type='submenu'].lm-mod-disabled > .lm-Menu-itemSubmenuIcon {
  opacity: 0.4;
}
