/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * qBraid Theme for JupyterLab
 *
 * Design System based on qBraid Lab
 *
 * Color palette (OKLCH to Hex):
 * - Background:      oklch(0.12 0.01 280) = #1a1a1f
 * - Sidebar:         oklch(0.14 0.01 280) = #1f1f24
 * - Card:            oklch(0.16 0.01 280) = #242428
 * - Secondary:       oklch(0.22 0.01 280) = #333338
 * - Border:          oklch(0.25 0.01 280) = #3a3a42
 * - Muted-fg:        oklch(0.55 0 0)      = #808080
 * - Foreground:      oklch(0.92 0 0)      = #e8e8e8
 * - Success (green): oklch(0.65 0.18 160) = #10b981
 * - qBraid (coral):  oklch(0.65 0.2 25)   = #ef6950
 * - Code keyword:    oklch(0.7 0.18 280)  = #a78bfa (purple)
 * - Code string:     oklch(0.7 0.15 200)  = #38bdf8 (cyan)
 * - Code function:   oklch(0.7 0.12 250)  = #60a5fa (blue)
 * - Code error:      oklch(0.65 0.22 25)  = #ef4444 (red)
 */

@import './qbraid-tokens.css';

:root {
  /* Elevation & Shadows */
  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(0, 0, 0, 0.4);
  --jp-shadow-penumbra-color: rgba(0, 0, 0, 0.3);
  --jp-shadow-ambient-color: rgba(0, 0, 0, 0.2);
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 1px 3px 0 rgba(0, 0, 0, 0.4);
  --jp-elevation-z2: 0 2px 6px 0 rgba(0, 0, 0, 0.45);
  --jp-elevation-z4: 0 4px 10px 0 rgba(0, 0, 0, 0.5);
  --jp-elevation-z6: 0 6px 14px 0 rgba(0, 0, 0, 0.55);
  --jp-elevation-z8: 0 8px 18px 0 rgba(0, 0, 0, 0.6);
  --jp-elevation-z12: 0 12px 28px 0 rgba(0, 0, 0, 0.6);
  --jp-elevation-z16: 0 16px 36px 0 rgba(0, 0, 0, 0.6);
  --jp-elevation-z20: 0 20px 44px 0 rgba(0, 0, 0, 0.6);
  --jp-elevation-z24: 0 24px 52px 0 rgba(0, 0, 0, 0.6);

  /* Shortcut buttons */
  --jp-shortcuts-button-background: var(--jp-brand-color2);
  --jp-shortcuts-button-hover-background: var(--jp-brand-color1);

  /* Borders - Purple-tinted (oklch hue 280) */
  --jp-border-width: 1px;
  --jp-border-color0: #3a3a42;
  --jp-border-color1: #333338;
  --jp-border-color2: #2a2a30;
  --jp-border-color3: #242428;
  --jp-inverse-border-color: #4a4a52;
  --jp-border-radius: 8px;

  /* UI Fonts */
  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px;
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: 'Geist', -apple-system, blinkmacsystemfont, 'Segoe UI',
    roboto, oxygen, ubuntu, cantarell, 'Fira Sans', 'Droid Sans',
    'Helvetica Neue', sans-serif;

  /* UI Font colors */
  --jp-ui-font-color0: #e8e8e8;
  --jp-ui-font-color1: #d4d4d4;
  --jp-ui-font-color2: #a0a0a0;
  --jp-ui-font-color3: #707070;

  /* Inverse font colors */
  --jp-ui-inverse-font-color0: #1a1a1f;
  --jp-ui-inverse-font-color1: #242428;
  --jp-ui-inverse-font-color2: #404040;
  --jp-ui-inverse-font-color3: #707070;

  /* Content Fonts */
  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px;
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Content font colors */
  --jp-content-font-color0: #e8e8e8;
  --jp-content-font-color1: #d4d4d4;
  --jp-content-font-color2: #a0a0a0;
  --jp-content-font-color3: #707070;

  /* Links */
  --jp-content-link-color: #10b981;
  --jp-content-link-visited-color: #a78bfa;
  --jp-content-link-hover-color: #34d399;
  --jp-content-font-family: 'Geist', -apple-system, blinkmacsystemfont,
    'Segoe UI', roboto, oxygen, ubuntu, cantarell, 'Fira Sans', 'Droid Sans',
    'Helvetica Neue', sans-serif;

  /* Code Fonts */
  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.5;
  --jp-code-padding: 5px;
  --jp-code-font-family-default: 'Geist Mono', 'JetBrains Mono', 'Fira Code',
    menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);
  --jp-code-presentation-font-size: 16px;
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout Colors - Purple-tinted dark palette */
  --jp-layout-color0: #1a1a1f;
  --jp-layout-color1: #1f1f24;
  --jp-layout-color2: #242428;
  --jp-layout-color3: #2a2a30;
  --jp-layout-color4: #333338;

  /* Inverse Layout */
  --jp-inverse-layout-color0: #fafafa;
  --jp-inverse-layout-color1: #f5f5f5;
  --jp-inverse-layout-color2: #e5e5e5;
  --jp-inverse-layout-color3: #d4d4d4;
  --jp-inverse-layout-color4: #a3a3a3;

  /* Brand Colors - Green Primary */
  --jp-brand-color0: #059669;
  --jp-brand-color1: #10b981;
  --jp-brand-color2: #34d399;
  --jp-brand-color3: #6ee7b7;
  --jp-brand-color4: #a7f3d0;

  /* Accent Colors - Purple Secondary */
  --jp-accent-color0: #7c3aed;
  --jp-accent-color1: #8b5cf6;
  --jp-accent-color2: #a78bfa;
  --jp-accent-color3: #c4b5fd;

  /* State Colors */
  --jp-warn-color0: #d97706;
  --jp-warn-color1: #f59e0b;
  --jp-warn-color2: #fbbf24;
  --jp-warn-color3: #fcd34d;
  --jp-error-color0: #dc2626;
  --jp-error-color1: #ef4444;
  --jp-error-color2: #f87171;
  --jp-error-color3: #fca5a5;
  --jp-success-color0: #059669;
  --jp-success-color1: #10b981;
  --jp-success-color2: #34d399;
  --jp-success-color3: #6ee7b7;
  --jp-info-color0: #0891b2;
  --jp-info-color1: #06b6d4;
  --jp-info-color2: #22d3ee;
  --jp-info-color3: #67e8f9;

  /* Cell Styles */
  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: #242428;
  --jp-cell-editor-border-color: #333338;
  --jp-cell-editor-box-shadow: none;
  --jp-cell-editor-active-background: #242428;
  --jp-cell-editor-active-border-color: rgba(180, 180, 190, 0.5);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: #707070;
  --jp-cell-inprompt-font-color: #808080;
  --jp-cell-outprompt-font-color: #f59e0b;

  /* Notebook Styles */
  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color2);
  --jp-notebook-multiselected-color: rgba(200, 200, 210, 0.12);
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );
  --jp-editor-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - 1px
  );

  /* Rendermime Styles */
  --jp-rendermime-error-background: rgba(239, 68, 68, 0.08);
  --jp-rendermime-table-row-background: var(--jp-layout-color2);
  --jp-rendermime-table-row-hover-background: rgba(16, 185, 129, 0.08);

  /* Dialog Styles */
  --jp-dialog-background: rgba(0, 0, 0, 0.75);

  /* Console Styles */
  --jp-console-padding: 10px;

  /* Toolbar Styles */
  --jp-toolbar-border-color: #2a2a30;
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: #242428;
  --jp-toolbar-box-shadow: none;
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: #333338;

  /* Statusbar */
  --jp-statusbar-height: 24px;

  /* Input Fields */
  --jp-input-box-shadow: none;
  --jp-input-active-background: #1a1a1f;
  --jp-input-hover-background: #2a2a30;
  --jp-input-background: #1a1a1f;
  --jp-input-border-color: #333338;
  --jp-input-active-border-color: #10b981;
  --jp-input-active-box-shadow-color: rgba(16, 185, 129, 0.25);

  /* Editor Styles */
  --jp-editor-selected-background: #333338;
  --jp-editor-selected-focused-background: rgba(200, 200, 210, 0.12);
  --jp-editor-cursor-color: #e8e8e8;

  /* Code Mirror Syntax Theme */
  --jp-mirror-editor-keyword-color: #a78bfa;
  --jp-mirror-editor-atom-color: #60a5fa;
  --jp-mirror-editor-number-color: #fbbf24;
  --jp-mirror-editor-def-color: #60a5fa;
  --jp-mirror-editor-variable-color: #e8e8e8;
  --jp-mirror-editor-variable-2-color: #38bdf8;
  --jp-mirror-editor-variable-3-color: #34d399;
  --jp-mirror-editor-punctuation-color: #9ca3af;
  --jp-mirror-editor-property-color: #60a5fa;
  --jp-mirror-editor-operator-color: #f472b6;
  --jp-mirror-editor-comment-color: #6b7280;
  --jp-mirror-editor-string-color: #38bdf8;
  --jp-mirror-editor-string-2-color: #a78bfa;
  --jp-mirror-editor-meta-color: #f472b6;
  --jp-mirror-editor-qualifier-color: #9ca3af;
  --jp-mirror-editor-builtin-color: #34d399;
  --jp-mirror-editor-bracket-color: #9ca3af;
  --jp-mirror-editor-tag-color: #f472b6;
  --jp-mirror-editor-attribute-color: #60a5fa;
  --jp-mirror-editor-header-color: #a78bfa;
  --jp-mirror-editor-quote-color: #34d399;
  --jp-mirror-editor-link-color: #10b981;
  --jp-mirror-editor-error-color: #ef4444;
  --jp-mirror-editor-hr-color: #3a3a42;

  /* RTC Collaborator Colors */
  --jp-collaborator-color1: #f97316;
  --jp-collaborator-color2: #eab308;
  --jp-collaborator-color3: #22c55e;
  --jp-collaborator-color4: #14b8a6;
  --jp-collaborator-color5: #3b82f6;
  --jp-collaborator-color6: #8b5cf6;
  --jp-collaborator-color7: #ec4899;

  /* Vega */
  --jp-vega-background: #e5e5e5;

  /* Sidebar */
  --jp-sidebar-min-width: 250px;

  /* Search */
  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.75;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: #f59e0b;
  --jp-search-selected-match-color: #1a1a1f;
  --jp-search-unselected-match-background-color: rgba(251, 191, 36, 0.3);
  --jp-search-unselected-match-color: #e8e8e8;

  /* Scrollbar */
  --jp-scrollbar-background-color: transparent;
  --jp-scrollbar-thumb-color: 58, 58, 66;
  --jp-scrollbar-endpad: 3px;
  --jp-scrollbar-thumb-margin: 3.5px;
  --jp-scrollbar-thumb-radius: 4px;

  /* Icon Colors */
  --jp-icon-contrast-color0: #a78bfa;
  --jp-icon-contrast-color1: #10b981;
  --jp-icon-contrast-color2: #f472b6;
  --jp-icon-contrast-color3: #60a5fa;

  /* Button Colors */
  --jp-accept-color-normal: #10b981;
  --jp-accept-color-hover: #059669;
  --jp-accept-color-active: #047857;
  --jp-warn-color-normal: #ef4444;
  --jp-warn-color-hover: #dc2626;
  --jp-warn-color-active: #b91c1c;
  --jp-reject-color-normal: #525252;
  --jp-reject-color-hover: #404040;
  --jp-reject-color-active: #333;

  /* File/Activity Icons */
  --jp-jupyter-icon-color: #f97316;
  --jp-notebook-icon-color: #f97316;
  --jp-json-icon-color: #f59e0b;
  --jp-console-icon-background-color: #3b82f6;
  --jp-console-icon-color: white;
  --jp-terminal-icon-background-color: #333338;
  --jp-terminal-icon-color: #10b981;
  --jp-text-editor-icon-color: #a0a0a0;
  --jp-inspector-icon-color: #a0a0a0;
  --jp-switch-color: #525252;
  --jp-switch-true-position-color: #10b981;
}

/* Completer Styles */
.jp-Completer {
  --jp-completer-type-background0: transparent;
  --jp-completer-type-background1: #3b82f6;
  --jp-completer-type-background2: #f97316;
  --jp-completer-type-background3: #10b981;
  --jp-completer-type-background4: #ef4444;
  --jp-completer-type-background5: #8b5cf6;
  --jp-completer-type-background6: #78716c;
  --jp-completer-type-background7: #ec4899;
  --jp-completer-type-background8: #525252;
  --jp-completer-type-background9: #eab308;
  --jp-completer-type-background10: #14b8a6;

  background: #242428 !important;
  border: 1px solid #3a3a42 !important;
  border-radius: 8px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
}

/*=============================================================================
  qBraid Lab Component Overrides
  All styles use !important to override bundled component defaults
=============================================================================*/

/* ============================================
   Header / Menu Bar
   Height: 48px, darker background for visibility
   ============================================ */

.lm-MenuBar {
  background: #1a1a1f !important;
  border-bottom: 1px solid #333338 !important;
  color: #d0d0d0 !important;
  height: 40px !important;
  line-height: 40px !important;
  padding: 0 12px !important;
}

.lm-MenuBar-item {
  padding: 0 12px !important;
  border-radius: 0 !important;
  margin: 0 !important;
  height: 40px !important;
  line-height: 40px !important;
  color: #d0d0d0 !important;
  font-size: 13px !important;
  font-weight: 400 !important;
}

.lm-MenuBar-item:hover {
  background: #333338 !important;
  color: #fff !important;
}

.lm-MenuBar-item.lm-mod-active {
  background: #333338 !important;
  color: #fff !important;
}

/* Dropdown menus */
.lm-Menu {
  background: #242428 !important;
  border: 1px solid #3a3a42 !important;
  border-radius: 8px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
  padding: 6px !important;
}

.lm-Menu-item {
  padding: 8px 32px 8px 12px !important;
  border-radius: 6px !important;
  color: #a0a0a0 !important;
  font-size: 13px !important;
}

.lm-Menu-item:hover,
.lm-Menu-item.lm-mod-active {
  background: #333338 !important;
  color: #e8e8e8 !important;
}

.lm-Menu-item.lm-mod-disabled {
  color: #505050 !important;
}

.lm-Menu-itemShortcut {
  color: #707070 !important;
}

.lm-Menu-item[data-type='separator'] > div::after {
  border-color: #3a3a42 !important;
}

/* ============================================
   Sidebar Navigation (Icon Bar)
   Width: 48px, lighter background for visibility
   ============================================ */

.jp-SideBar.lm-TabBar {
  background: #2a2a30 !important;
  border-right: 1px solid #3a3a42 !important;
  width: 48px !important;
}

.jp-SideBar .lm-TabBar-tab {
  background: transparent !important;
  padding: 12px 0 !important;
  min-width: 48px !important;
  min-height: 40px !important;
}

.jp-SideBar .lm-TabBar-tab:not(.lm-mod-current) {
  opacity: 0.7;
}

.jp-SideBar .lm-TabBar-tab.lm-mod-current {
  opacity: 1;
  background: #3a3a42 !important;
}

.jp-SideBar .lm-TabBar-tab:hover {
  opacity: 1;
  background: #3a3a42 !important;
}

/* Active tab indicator - off-white accent on left */
.jp-SideBar.jp-mod-left .lm-mod-current::before {
  background: rgba(220, 220, 230, 0.8) !important;
  width: 3px !important;
  border-radius: 0 !important;
}

.jp-SideBar.jp-mod-right .lm-mod-current::before {
  background: rgba(220, 220, 230, 0.8) !important;
  width: 3px !important;
}

/* ============================================
   File Browser Panel
   bg-card (#242428), border-r
   ============================================ */

.jp-SidePanel {
  background: #242428 !important;
}

.jp-SidePanel-header {
  background: #242428 !important;
  border-bottom: 1px solid #333338 !important;
}

/* File Browser Toolbar */
.jp-FileBrowser-toolbar.jp-Toolbar {
  background: #242428 !important;
  border-bottom: 1px solid #333338 !important;
  padding: 8px !important;
  min-height: 40px !important;
}

/* New file button - qBraid coral accent */
.jp-FileBrowser-toolbar
  .jp-ToolbarButton:first-child
  .jp-ToolbarButtonComponent {
  color: #ef6950 !important;
}

.jp-FileBrowser-toolbar
  .jp-ToolbarButton:first-child
  .jp-ToolbarButtonComponent:hover {
  background: rgba(239, 105, 80, 0.1) !important;
}

/* Filter/Search box */
.jp-FileBrowser-filterBox {
  background: #1a1a1f !important;
  border: 1px solid #333338 !important;
  border-radius: 6px !important;
  margin: 8px !important;
}

.jp-FileBrowser-filterBox input {
  background: transparent !important;
  color: #e8e8e8 !important;
}

.jp-FileBrowser-filterBox input::placeholder {
  color: #707070 !important;
}

/* Breadcrumbs */
.jp-BreadCrumbs {
  background: #242428 !important;
  padding: 8px 12px !important;
  font-size: 13px !important;
  color: #707070 !important;
  border-bottom: 1px solid #333338 !important;
}

.jp-BreadCrumbs-item:hover {
  color: #e8e8e8 !important;
}

/* Column headers */
.jp-DirListing-header {
  background: #242428 !important;
  border-bottom: 1px solid #333338 !important;
  color: #707070 !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.3px !important;
}

/* File listing */
.jp-DirListing {
  background: #242428 !important;
}

.jp-DirListing-content {
  background: #242428 !important;
  padding: 4px !important;
}

/* File/Folder items */
.jp-DirListing-item {
  color: #e8e8e8 !important;
  padding: 6px 12px !important;
  line-height: 22px !important;
  font-size: 13px !important;
  border-radius: 6px !important;
  margin: 1px 4px !important;
}

/* Selected item - subtle highlight */
.jp-DirListing-item.jp-mod-selected {
  background: #333338 !important;
  color: #e8e8e8 !important;
}

/* Focused selected item */
.jp-DirListing:focus .jp-DirListing-item.jp-mod-selected {
  background: #3a3a42 !important;
}

/* Hover state */
.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: rgba(255, 255, 255, 0.05) !important;
}

/* Running indicator */
.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: #10b981 !important;
}

/* Modified date column */
.jp-DirListing-item .jp-DirListing-itemModified {
  color: #707070 !important;
  font-size: 12px !important;
}

/* Accordion panels in sidebar */
.lm-AccordionPanel .jp-AccordionPanel-title {
  background: #242428 !important;
  border-bottom: 1px solid #333338 !important;
  color: #707070 !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.3px !important;
  padding: 10px 12px !important;
}

.lm-AccordionPanel .jp-AccordionPanel-title:hover {
  background: #2a2a30 !important;
  color: #a0a0a0 !important;
}

/* ============================================
   Notebook Tabs
   ============================================ */

.lm-DockPanel-tabBar,
.lm-TabPanel-tabBar {
  background: #242428 !important;
  border-bottom: 1px solid #333338 !important;
  min-height: 36px !important;
}

.lm-DockPanel-tabBar .lm-TabBar-tab,
.lm-TabPanel-tabBar .lm-TabBar-tab {
  background: #242428 !important;
  border: none !important;
  border-radius: 0 !important;
  color: #a0a0a0 !important;
  padding: 8px 16px !important;
  margin: 0 !important;
  border-right: 1px solid #333338 !important;
  font-size: 13px !important;
  min-height: 36px !important;
}

.lm-DockPanel-tabBar .lm-TabBar-tab:hover,
.lm-TabPanel-tabBar .lm-TabBar-tab:hover {
  background: #2a2a30 !important;
  color: #e8e8e8 !important;
}

/* Active tab */
.lm-DockPanel-tabBar .lm-TabBar-tab.lm-mod-current,
.lm-TabPanel-tabBar .lm-TabBar-tab.lm-mod-current {
  background: #1a1a1f !important;
  color: #e8e8e8 !important;
  font-weight: 500 !important;
}

/* Tab close button */
.lm-TabBar-tabCloseIcon {
  opacity: 0;
  transition: opacity 0.15s ease !important;
  border-radius: 4px !important;
  padding: 2px !important;
}

.lm-TabBar-tab:hover .lm-TabBar-tabCloseIcon {
  opacity: 0.6;
}

.lm-TabBar-tabCloseIcon:hover {
  opacity: 1 !important;
  background: #3a3a42 !important;
}

/* Modified indicator dot */
.lm-TabBar-tab.jp-mod-dirty .lm-TabBar-tabIcon::after {
  background: #a0a0a0 !important;
}

/* ============================================
   Notebook Toolbar
   bg-background (#1a1a1f), border-b
   ============================================ */

.jp-NotebookPanel-toolbar {
  background: #1a1a1f !important;
  border-bottom: 1px solid #333338 !important;
  padding: 4px 8px !important;
  min-height: 40px !important;
}

.jp-Toolbar {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

.jp-ToolbarButton .jp-ToolbarButtonComponent {
  background: transparent !important;
  border-radius: 6px !important;
  color: #a0a0a0 !important;
}

.jp-ToolbarButton .jp-ToolbarButtonComponent:hover {
  background: #333338 !important;
  color: #e8e8e8 !important;
}

/* Run button - green accent */
.jp-Toolbar-item[data-jp-item-name='run'] .jp-ToolbarButtonComponent,
.jp-Toolbar-item[data-jp-item-name='runAll'] .jp-ToolbarButtonComponent {
  color: #10b981 !important;
}

.jp-Toolbar-item[data-jp-item-name='run'] .jp-ToolbarButtonComponent:hover,
.jp-Toolbar-item[data-jp-item-name='runAll'] .jp-ToolbarButtonComponent:hover {
  background: rgba(16, 185, 129, 0.1) !important;
}

/* Kernel selector pill */
.jp-Notebook-ExecutionIndicator {
  background: #333338 !important;
  border-radius: 9999px !important;
  padding: 4px 12px !important;
  color: #e8e8e8 !important;
  font-size: 12px !important;
}

/* Kernel status indicator - green dot */
.jp-Notebook-ExecutionIndicator::before {
  content: '';
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #10b981;
  margin-right: 6px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

/* Code dropdown */
.jp-Notebook-toolbarCellType select,
.jp-Toolbar select {
  background: transparent !important;
  border: 1px solid #3a3a42 !important;
  border-radius: 6px !important;
  color: #e8e8e8 !important;
  padding: 4px 8px !important;
}

/* ============================================
   Notebook Content Area
   bg-background (#1a1a1f)
   ============================================ */

.jp-Notebook {
  background: #1a1a1f !important;
  padding: 16px !important;
}

/* ============================================
   Notebook Cells - Card Style
   ============================================ */

.jp-Cell {
  background: transparent !important;
  margin: 0 0 12px !important;
}

/* Cell container */
.jp-Cell > .jp-Cell-inputWrapper,
.jp-Cell > .jp-Cell-outputWrapper {
  background: #242428 !important;
  border: 1px solid #333338 !important;
  border-radius: 8px !important;
}

.jp-Cell > .jp-Cell-inputWrapper {
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
}

.jp-Cell > .jp-Cell-outputWrapper {
  border-top: none !important;
  border-top-left-radius: 0 !important;
  border-top-right-radius: 0 !important;
}

/* Cell with output */
.jp-Cell:has(.jp-Cell-outputWrapper:not(:empty)) > .jp-Cell-inputWrapper {
  border-bottom: none !important;
}

/* Active/Selected cell - off-white border and accent */
.jp-Cell.jp-mod-active > .jp-Cell-inputWrapper {
  border-color: rgba(180, 180, 190, 0.5) !important;
}

.jp-Cell.jp-mod-active > .jp-Cell-outputWrapper {
  border-color: rgba(180, 180, 190, 0.5) !important;
}

/* Override any green collapser/highlight */
.jp-Cell.jp-mod-active .jp-InputCollapser,
.jp-Cell.jp-mod-active .jp-OutputCollapser {
  background: rgba(180, 180, 190, 0.8) !important;
}

.jp-InputCollapser:hover,
.jp-OutputCollapser:hover {
  background: rgba(180, 180, 190, 0.6) !important;
}

/* Cell collapser default */
.jp-Cell .jp-Collapser {
  background: transparent !important;
}

.jp-Cell.jp-mod-active .jp-Collapser {
  background: rgba(180, 180, 190, 0.8) !important;
}

/* Cell prompt [n]: */
.jp-InputPrompt,
.jp-OutputPrompt {
  color: #707070 !important;
  font-family: var(--jp-code-font-family) !important;
  font-size: 12px !important;
  min-width: 56px !important;
  padding: 12px 8px !important;
}

/* Code editor area */
.jp-InputArea-editor {
  background: #242428 !important;
  border: none !important;
  border-radius: 0 8px 8px 0 !important;
  padding: 8px !important;
}

.jp-Cell.jp-mod-active .jp-InputArea-editor {
  background: #242428 !important;
}

/* Output area */
.jp-OutputArea {
  background: #1f1f24 !important;
  padding: 12px !important;
  border-top: 1px solid #333338 !important;
}

/* Error output - red tinted background */
.jp-OutputArea-output[data-mime-type='application/vnd.jupyter.stderr'],
.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: rgba(239, 68, 68, 0.08) !important;
  border-left: 3px solid #ef4444 !important;
  padding: 12px !important;
  border-radius: 0 !important;
}

.jp-OutputArea-output pre {
  color: #e8e8e8 !important;
}

/* Error text color */
.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] pre {
  color: #ef4444 !important;
}

/* ============================================
   Stack Panels (Left/Right sidebars content)
   ============================================ */

#jp-left-stack > .lm-Widget,
#jp-right-stack > .lm-Widget {
  background-color: #242428 !important;
}

#jp-left-stack {
  border-right: 1px solid #333338 !important;
}

#jp-right-stack {
  border-left: 1px solid #333338 !important;
}

/* ============================================
   Status Bar
   ============================================ */

.jp-mod-statusBar {
  background: #242428 !important;
  border-top: 1px solid #333338 !important;
  color: #a0a0a0 !important;
}

/* ============================================
   Dialogs and Modals
   ============================================ */

.jp-Dialog-content {
  background: #242428 !important;
  border: 1px solid #3a3a42 !important;
  border-radius: 12px !important;
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5) !important;
}

.jp-Dialog-header {
  background: transparent !important;
  border-bottom: 1px solid #333338 !important;
  padding: 16px 20px !important;
}

.jp-Dialog-body {
  background: transparent !important;
  padding: 20px !important;
}

.jp-Dialog-footer {
  background: transparent !important;
  border-top: 1px solid #333338 !important;
  padding: 16px 20px !important;
}

/* Dialog buttons */
.jp-Dialog-button {
  border-radius: 6px !important;
  padding: 8px 16px !important;
  font-weight: 500 !important;
}

.jp-Dialog-button.jp-mod-accept {
  background: #10b981 !important;
  color: #1a1a1f !important;
}

.jp-Dialog-button.jp-mod-accept:hover {
  background: #059669 !important;
}

.jp-Dialog-button.jp-mod-reject {
  background: #333338 !important;
  color: #e8e8e8 !important;
}

.jp-Dialog-button.jp-mod-reject:hover {
  background: #3a3a42 !important;
}

/* ============================================
   Launcher
   ============================================ */

.jp-Launcher {
  background: #1a1a1f !important;
  padding: 32px !important;
}

.jp-Launcher-section {
  padding: 16px 0 !important;
}

.jp-Launcher-sectionTitle {
  color: #707070 !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
  margin-bottom: 16px !important;
}

.jp-LauncherCard {
  background: #242428 !important;
  border: 1px solid #333338 !important;
  border-radius: 12px !important;
  transition: all 0.2s ease !important;
}

.jp-LauncherCard:hover {
  background: #2a2a30 !important;
  border-color: #10b981 !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 8px 24px rgba(16, 185, 129, 0.15) !important;
}

.jp-LauncherCard-label {
  color: #e8e8e8 !important;
}

/* ============================================
   Completer / Autocomplete Items
   ============================================ */

.jp-Completer-item {
  padding: 6px 12px !important;
  color: #e8e8e8 !important;
}

.jp-Completer-item.jp-mod-active {
  background: #333338 !important;
}

/* ============================================
   Terminal
   ============================================ */

.jp-Terminal {
  background: #1a1a1f !important;
}

/* ============================================
   Code Mirror Editor Overrides
   ============================================ */

.cm-editor {
  background: transparent !important;
}

.cm-content {
  caret-color: #e8e8e8 !important;
}

.cm-line {
  padding: 0 4px !important;
}

/* Selection - off-white tint */
.cm-selectionBackground {
  background: rgba(200, 200, 210, 0.15) !important;
}

.cm-focused .cm-selectionBackground {
  background: rgba(200, 200, 210, 0.25) !important;
}

/* Line numbers */
.cm-gutters {
  background: transparent !important;
  border-right: none !important;
}

.cm-lineNumbers .cm-gutterElement {
  color: #505050 !important;
}

/* Active line */
.cm-activeLine {
  background: rgba(255, 255, 255, 0.03) !important;
}

.cm-activeLineGutter {
  background: transparent !important;
}

/* Matching brackets */
.cm-matchingBracket {
  background: rgba(200, 200, 210, 0.25) !important;
  color: #fff !important;
}

/* Search highlight */
.cm-searchMatch {
  background: rgba(251, 191, 36, 0.3) !important;
}

.cm-searchMatch.cm-searchMatch-selected {
  background: #f59e0b !important;
  color: #1a1a1f !important;
}
